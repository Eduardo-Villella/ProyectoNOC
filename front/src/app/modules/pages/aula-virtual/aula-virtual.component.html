<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aula virtual</title>
  <link rel="stylesheet" href="aula-virtual.component.css">

</head>
<body>
    <!-- Contenido especifico para alumnos -->
    <div *ngIf="tipoDeUsuario === 'Alumno'">
        <div class="contenedor">
            <div>
                <h2>Estas ahora en tu aula virtual de:</h2>
            </div>
            <div>
                <h1>{{ nombreCurso }}</h1>
            </div>
            <div>
                <img [src]="imagenCurso" alt="{{ nombreCurso }}">
            </div>
            <div>
                <h1>Esta página se encuentra</h1>
                <h1>fuera del alcance del Proyecto Actual.</h1>
                <h1>Muchas GRACIAS por permitirnos ser parte de él.</h1>
                <h1>¡Cuenta con nosotros para las próximas etapas!!!</h1>
            </div>
        </div> 
    </div>

    <!-- Contenido especifico para docente -->
    <div *ngIf="tipoDeUsuario === 'Docente'">
        <div class="curso-titulo">
            <div class="curso-com">
                <h2>Estas en el aula virtual de:</h2>
            </div>
            <div class="curso-nombre">
                <h1>{{ nombreCurso }}</h1>
            </div>
            <div class="curso-imagen">
                <img [src]="imagenCurso" alt="{{ nombreCurso }}">
            </div>
        </div>

        <div class="aula-virtual">
            <!-- Formulario para la búsqueda -->
            <form [formGroup]="formulario" (ngSubmit)="search()" class="formSearch">
              <label for="selectedField" class="formSelected">Seleccionar campo: </label>
              <select id="selectedField" formControlName="selectedField" class="formSelected">
                <option value="nombre">Nombre</option>
                <option value="apellido">Apellido</option>
                <option value="username">Usuario</option>
                <option value="email">E-mail</option>
              </select>
              
              <label for="searchQuery" class="formInput">Buscar: </label>
              <input type="text" id="searchQuery" formControlName="searchQuery" class="formInput">
              
              <button type="submit" class="formButton">Buscar</button>
            </form>

            <!-- <div>
              <p>Valor seleccionado: {{ this.formulario.get('selectedField')?.value }}</p>
              <p>Valor de búsqueda: {{ this.formulario.get('searchQuery')?.value }}</p>
            </div> -->
          
            <div>
              <p class="mensaje-positivo" *ngIf="alumnoSeleccionado; else noCoincidencias">
                Coincidencia encontrada: {{ alumnoSeleccionado.username }}
              </p>
              <ng-template #noCoincidencias>
                <p class="mensaje-negativo">No se encontraron coincidencias</p>
              </ng-template>
            </div>

            <!-- Detalles del alumno -->
            <div *ngIf="alumnoSeleccionado" class="alumno-datos">
              <h2>Detalles del alumno:</h2>
              <p>Nombre: {{ alumnoSeleccionado.nombre }}</p>
              <p>Apellido: {{ alumnoSeleccionado.apellido }}</p>
              <p>Usuario: {{ alumnoSeleccionado.username }}</p>
              <p>E-mail: {{ alumnoSeleccionado.email }}</p>
            </div>

            <!-- Casillas para calificaciones -->
            <div *ngIf="alumnoSeleccionado" class="alumno-datos">
              <h2>Calificaciones:</h2>
              <form [formGroup]="formulario" (ngSubmit)="courseId !== undefined ? agregarDatos(courseId) : null" class="notas-prom-asist ">
                
                <label for="notaInput">Notas:</label>
                <input type="number" id="notaInput" formControlName="notaInput">
              
                <button type="submit" class="buttonNotas">Agregar Datos</button>
              </form>
            </div>

            <!-- Casillas para asistencia -->
            <div *ngIf="alumnoSeleccionado" class="alumno-datos">
              <h2>Asistencia:</h2>
              <!-- Agregar elementos para ingresar datos de asistencia -->
            </div>
          </div>

          <div class="buttonEnd">
            <button (click)="guardarDatosDB()">Guardar Datos</button>
          </div>
    </div>
    
</body>